<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>计算机网络综合训练报告 | Endorphin's Blog</title><meta name="author" content="Endorphin"><meta name="copyright" content="Endorphin"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="任务介绍中小型企业网络搭建某企业计划建设自己的企业园区网络，希望通过这个新建的网络提供一个安全、可靠、可扩展、高效的网络环境，将两个办公地点连接到一起，使企业内能够方便快捷地实现网络资源共享、全网接入Internet等目标，同时实现公司内部的信息保密隔离，以及对于公网的安全访问。为了确保这些关键应用系统的正常运行、安全发展，网络必须具备以下特性： （1）采用先进的网络通信技术完成企业内部网络的建设">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络综合训练报告">
<meta property="og:url" content="http://example.com/2024/06/15/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/%E8%AE%A1%E7%BD%91%E5%AE%9E%E8%AE%AD%E8%AE%BA%E6%96%87/index.html">
<meta property="og:site_name" content="Endorphin's Blog">
<meta property="og:description" content="任务介绍中小型企业网络搭建某企业计划建设自己的企业园区网络，希望通过这个新建的网络提供一个安全、可靠、可扩展、高效的网络环境，将两个办公地点连接到一起，使企业内能够方便快捷地实现网络资源共享、全网接入Internet等目标，同时实现公司内部的信息保密隔离，以及对于公网的安全访问。为了确保这些关键应用系统的正常运行、安全发展，网络必须具备以下特性： （1）采用先进的网络通信技术完成企业内部网络的建设">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://tse4-mm.cn.bing.net/th/id/OIP-C.WRUHUqRfulfxFQ8Z3GihKQAAAA?w=202&amp;h=202&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.3&amp;pid=1.7">
<meta property="article:published_time" content="2024-06-14T16:00:00.000Z">
<meta property="article:modified_time" content="2024-06-20T10:20:42.515Z">
<meta property="article:author" content="Endorphin">
<meta property="article:tag" content="计算机网络">
<meta property="article:tag" content="服务器搭建">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://tse4-mm.cn.bing.net/th/id/OIP-C.WRUHUqRfulfxFQ8Z3GihKQAAAA?w=202&amp;h=202&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.3&amp;pid=1.7"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2024/06/15/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/%E8%AE%A1%E7%BD%91%E5%AE%9E%E8%AE%AD%E8%AE%BA%E6%96%87/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '计算机网络综合训练报告',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-06-20 18:20:42'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/modify.css"><meta name="generator" content="Hexo 7.2.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://tse4-mm.cn.bing.net/th/id/OIP-C.WRUHUqRfulfxFQ8Z3GihKQAAAA?w=202&amp;h=202&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.3&amp;pid=1.7" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr class="custom-hr"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Endorphin's Blog"><span class="site-name">Endorphin's Blog</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">计算机网络综合训练报告</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-06-14T16:00:00.000Z" title="发表于 2024-06-15 00:00:00">2024-06-15</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-06-20T10:20:42.515Z" title="更新于 2024-06-20 18:20:42">2024-06-20</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="计算机网络综合训练报告"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="任务介绍"><a href="#任务介绍" class="headerlink" title="任务介绍"></a>任务介绍</h1><h2 id="中小型企业网络搭建"><a href="#中小型企业网络搭建" class="headerlink" title="中小型企业网络搭建"></a>中小型企业网络搭建</h2><p>某企业计划建设自己的企业园区网络，希望通过这个新建的网络提供一个安全、可靠、可扩展、高效的网络环境，将两个办公地点连接到一起，使企业内能够方便快捷地实现网络资源共享、全网接入Internet等目标，同时实现公司内部的信息保密隔离，以及对于公网的安全访问。为了确保这些关键应用系统的正常运行、安全发展，网络必须具备以下特性：</p>
<p>（1）采用先进的网络通信技术完成企业内部网络的建设，连接两个相距较远的办公地点。</p>
<p>（2）为了提高数据的传输效率，在整个企业网络内控制广播域的范围。</p>
<p>（3）在整个企业集团内实现资源共享，并保证骨干网络的高可靠性。</p>
<p>（4）企业内部网络中实现高效的路由选择。</p>
<p>（5）能够使用较少的公网IP接入Internet。</p>
<p>该企业的具体环境如下：</p>
<p>（1）企业具有两个办公地点，且相距较远。</p>
<p>（2）A办公地点具有的部门较多，例如业务部、财务部、综合部等，为主要的办公场所，因此这部分的交换网络对可用性和可靠性要求较高。</p>
<p>（3）B办公地点只有较少的办公人员，但是Internet的接入点在这里。</p>
<p>（4）公司已经申请到了若干公网IP地址，供企业接入使用。</p>
<p>（5）公司内部使用私网地址。项目任务如下图所示，实际建设时需要确定更详细的信息，端口如何分配、IP地址如何划分等。</p>
   <style>.vhktyzyhgazh{zoom:80%;}</style><img src="/2024/06/15/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/%E8%AE%A1%E7%BD%91%E5%AE%9E%E8%AE%AD%E8%AE%BA%E6%96%87/bee7aa7d4aa102372dc51acfbbca0535.png" class="vhktyzyhgazh">

<p>图1 中小型企业网络搭建示意图</p>
<h2 id="服务器搭建"><a href="#服务器搭建" class="headerlink" title="服务器搭建"></a>服务器搭建</h2><p>利用虚拟机软件VMware组建一个虚拟的交换网络，并测试。使虚拟网络的虚拟机之间能够通信，win7宿主机和虚拟机之间能够通信，虚拟机也更能够连接互联网。如图2所示。</p>
<img src="/2024/06/15/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/%E8%AE%A1%E7%BD%91%E5%AE%9E%E8%AE%AD%E8%AE%BA%E6%96%87/b763c9bc41076f643fbab99357c1c606.png" class="">

<p>图2 虚拟交换网络</p>
<p>搭建WEB、FTP、DHCP、DNS服务器，这些服务可以搭建在一台服务器上，也可以搭建在多台服务器上。所有的服务器均能够提供正确的网络服务。</p>
<h1 id="总体设计"><a href="#总体设计" class="headerlink" title="总体设计"></a>总体设计</h1><h2 id="中小型企业网络搭建-1"><a href="#中小型企业网络搭建-1" class="headerlink" title="中小型企业网络搭建"></a>中小型企业网络搭建</h2><p>经过小组成员的讨论，我们组设计出如图3所示的网络结构示意图。</p>
<style>.dmpoysijrvvo{zoom: 50%;}</style><img src="/2024/06/15/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/%E8%AE%A1%E7%BD%91%E5%AE%9E%E8%AE%AD%E8%AE%BA%E6%96%87/d2490010ff62efe6a9e58d7d2dd8a4a1.jpeg" class="dmpoysijrvvo">

<p>图3 网络结构示意图</p>
<p>我们是第七组，组内共4名成员，因此在总体设计上，共有四台PC机，其中在逻辑上，PC7与PC5是同一个部门（VLAN71），PC6和PC4是另一个部门（VLAN72）；在物理上，PC7与PC6连接在同一个交换机S1上，PC5和PC4连接在同一个交换机S2上。</p>
<p>S3（即SA）分别连接S1和S2，是一个三层交换机，充当了路由器的角色。而为了防止单点故障，增强网络的稳定性，增加了S4（即SB）和SA一起执行路由器的功能，把SA与SB相连，并把路径聚合，因此SB和SA一样，分别和S1、S2相连。</p>
<p>这样设计虽有效预防了单点故障，但也产生了新的问题——环路。数据可能会在环路中一直传输。因此，我们设计给S1、S2、S3和S4都配置生成树MSTP协议，用于防止环路。</p>
<p>最后，我们使用R1（即RA）来把下面的三层交换机结构一起与R2（即RB）接入，从而通过RB的NAT协议进行地址转换后，连接到互联网。</p>
<p>基于截止以上的设计，中小型企业网络的搭建已经基本完成，功能已经可以实现。但仍旧存在一个问题，即当SA或SB其中一个失效时，需要PC手动更换网关才能继续保障功能，很不方便。因此，我们通过给SA和SB配置VRRP协议，使得SA和SB抽象成为一个新的交换机，并通过此“新交换机”给两个VLAN分别下发“门票地址”。</p>
<p>以上是中小型企业网络搭建的总体设计思路。</p>
<h2 id="服务器搭建-1"><a href="#服务器搭建-1" class="headerlink" title="服务器搭建"></a>服务器搭建</h2><p>（1）每人分配一个内网IP地址段：192.168.xx,0，255.255.255.0</p>
<p>（2）每人分配一个子域：xxx.cie.net，其中xxx为学生姓名的缩写</p>
<p>根据霍老师的分配，我分配的网段为192.168.2.0，255.255.255.0</p>
<p>因此我的总体设计思路如下：</p>
<p>（1）搭建Web服务器，做一个简单的主页index.html，体现web服务</p>
<p>Windows平台IP为192.168.2.1,255.255.255.0，域名为：<a target="_blank" rel="noopener" href="http://www.sdz.cie.net./">www.sdz.cie.net。</a></p>
<p>Linux 平台IP为：192.168.2.251,255.255.255.0 ，域名为： www2.sdz.cie.net。</p>
<p>（2）搭建Ftp服务器</p>
<p>Windows平台IP为192.168.2.2,255.255.255.0，域名为：ftp.sdz.cie.net；</p>
<p>Linux 平台IP为：192.168.2.252,255.255.255.0 ，域名为： ftp2.sdz.cie.net。</p>
<p>（3）搭建DHCP服务器</p>
<p>Windows平台IP地址池为192.168.2.101——192.168.2.120；</p>
<p>Linux 平台IP地址池为192.168.2.201——192.168.2.220。</p>
<p>（4）搭建DNS服务器, 能够提供WEB服务器和FTP服务器的域名解析</p>
<p>Windows平台IP为：192.168.2.4, 255.255.255.0，域名为：domain.sdz.cie.net；</p>
<p>Linux 平台IP为：192.168.2.254, 255.255.255.0 ，域名为：domain2.sdz.cie.net。</p>
<p>Windows Server 2008虚拟机设置为NAT模式，Linux CentOS 7虚拟机设置为仅主机模式，通过Yum源进行安装。</p>
<p>由于VMnet1和VMnet8都具有自动DHCP的功能，因此在自己搭建DHCP服务时，应当先把虚拟网卡自带的DHCP服务禁用，避免服务的冲突。</p>
<h1 id="详细设计说明"><a href="#详细设计说明" class="headerlink" title="详细设计说明"></a>详细设计说明</h1><h2 id="中小型企业网络搭建-2"><a href="#中小型企业网络搭建-2" class="headerlink" title="中小型企业网络搭建"></a>中小型企业网络搭建</h2><p>请对照上文网络拓扑图进行查看</p>
<h3 id="S1-S2配置说明"><a href="#S1-S2配置说明" class="headerlink" title="S1 S2配置说明"></a>S1 S2配置说明</h3><p>首先，对设备进行重命名（S1或S2）；</p>
<p>通过no ip address命令删除默认VLAN1中的IP地址；</p>
<p>创建VLAN71和VLAN72；</p>
<p>把1号端口划分给VLAN71, 4号端口划分给VLAN72；</p>
<p>更改3号端口和4号端口为trunk模式；</p>
<p>为S1或S2配置MSTP协议，并启用。</p>
<h3 id="SA、SB配置说明"><a href="#SA、SB配置说明" class="headerlink" title="SA、SB配置说明"></a>SA、SB配置说明</h3><p>由于我负责的部分是SA的配置，因此我会着重对此部分进行介绍。</p>
<p>首先，对设备重命名（SA或SB）；</p>
<p>通过no ip address命令删除默认VLAN1中的IP地址，避免影响后续的工作；</p>
<p>创建VLAN71和VLAN72；</p>
<p>设置端口3和端口4为trunk模式，与S1和S2的3号和4号端口对应，使得能够跨虚拟局域网进行通信畅通。</p>
<p>给VLAN71分配虚拟接口地址，IP为192.168.71.253/24；给VLAN72分配虚拟接口地址，IP为192.168.72.253/24；</p>
<p>将端口1从二层接口改为三层接口，并且分配IP地址为10.36.10.1；</p>
<p>给SA或SB<strong>配置MSTP协议</strong>，通过在“逻辑上”断开一些链路，破坏了回路，防止传输的数据在网络中出现兜圈子现象。在协议中，优先级数字越小，优先级就越高。对VLAN71而言，SA的优先级设置为4096，SB的优先级设置为8192，因此VLAN71会优先选择SA的路径使用；而对VLAN72而言，SA的优先级设置为8192，SB的优先级设置为4096，因此VLAN72会优先选择SB的路径使用。这样就达到了一个相对平衡的作用，而不会导致所有的PC都优先去选择同一个设备，选择相同的线路。</p>
<p>接着<strong>配置VRRP协议</strong>，它是一种用于提高网络可靠性的容错协议，他可以将多个路由设备组合成一个虚拟的路由设备，将虚拟路由设备的 IP 地址作为用户的默认网关，实现与外部网络的通信。它把一个虚拟路由器的责任动态分配到局域网上的 VRRP 路由器中的一台。当网关设备发生故障时，VRRP能选出新的设备来承担数据流量，确保网络的可靠通信。在VRRP协议中，优先级数字越大，优先级越高。</p>
<p>SA配置时，VLAN71的优先级设置为120，VLAN72的优先级设置为100。SB配置时，VLAN71优先级为100，VLAN72的优先级为120，刚好反过来。这样的话，VLAN71的设备会优先选择SB作为自己的三层交换机使用，而VLAN72中的设备会优先选择SA作为自己的三层交换机去使用。达到了负载均衡，合理分配的效果。两个VLAN抽象出的IP地址分别为192.168.71.252和192.168.72.252。</p>
<p>接着配置SA与SB的连接，<strong>链路聚合</strong>是指将多个物理端口捆绑在一起，成为一个逻辑端口，以实现出入流量在各成员端口中的负荷分担，交换机根据用户配置的端口负荷分担策略决定报文从哪一个成员端口发送到对端的交换机。当交换机检测到其中一个成员端口的链路发生故障时，就停止在此端口上发送报文，并根据负荷分担策略在剩下链路中重新计算报文发送的端口，故障端口恢复后再次重新计算报文发送端口。链路聚合在增加链路带宽、实现链路传输弹性和冗余等方面是一项很重要的技术。通过路径聚合，把SA和SB的5号和6号端口分别相连形成的两条链路抽象成一条链路，从而解决单点故障问题。</p>
<p>最后，给SA和SB<strong>配置RIP协议</strong>，使得它们可以充当一个路由器的角色，从而实现不同VLAN间的通信。RIP 协议通过周期性地广播路由表信息，可以使得网络中的路由器了解到其他路由器的存在，有助于维护每台路由器的路由表。</p>
<h3 id="RA的配置"><a href="#RA的配置" class="headerlink" title="RA的配置"></a>RA的配置</h3><p>首先更改设备名称为RA</p>
<p>配置1号端口的IP为10.36.10.2，与SA的1号端口地址在同一个网段；配置2号端口IP为10.36.20.2，与SB的1号端口在同一个网段；最后配置3号端口IP为10.36.30.2，用于与RB相连，最终连接互联网。</p>
<p>配置RIP协议，使得RA也可以正常路由。</p>
<h3 id="RB的配置"><a href="#RB的配置" class="headerlink" title="RB的配置"></a>RB的配置</h3><p>首先更改设备名称为RB，设置2号端口（与外部Internet相连）IP为172.29.20.54（是一台PC机的主网卡），3号端口（与RA想连）的IP为10.36.30.1；</p>
<p>配置RIP协议</p>
<p>配置NAT协议，把3号端口设置成inside内部，2号端口设置成outside外部，通过NAT协议把内网IP转换为公网IP，可以正常上网。</p>
<h3 id="PC配置"><a href="#PC配置" class="headerlink" title="PC配置"></a>PC配置</h3><p>把四台PC按照图3的IP分别设置，VLAN71的PC的网关设置为192.168.71.252；VLAN72的网关设置为192.168.72.252。</p>
<h3 id="连线"><a href="#连线" class="headerlink" title="连线"></a>连线</h3><p>我们把所有的线连接好，包括机箱上SA和SB之间5、6号端口之间的物理连线</p>
<h2 id="服务器搭建-2"><a href="#服务器搭建-2" class="headerlink" title="服务器搭建"></a>服务器搭建</h2><p>由于对这个部分的任务在之前几乎完全无了解，因此一开始并没有设计，基本同总体设计2中所述。准备找点资料和教程照着配，照着学。</p>
<p>由于实验室电脑截图不方便，加之无QQ微信等文件传输软件，因此我并没有保存设计过程的截图，以下截图都是我从教程中截的图，不是我在搭建过程中截的图，不过效果一样，这里我大概阐述一下我的搭建过程。</p>
<h3 id="Windows-Server-2008"><a href="#Windows-Server-2008" class="headerlink" title="Windows Server 2008"></a>Windows Server 2008</h3><p>windows下都是图形化界面，我一开始以为windows会更容易。但事实是windows花了我最多的时间，一整天时间我才搭好windows的服务，遇到了各种各样奇葩的坑。</p>
<p>总体上，是通过角色管理这么一个功能，来添加不同的服务，依次可以配置WEB、FTP、DHCP和DNS。配置完WEB后，FTP可以挂载在WEB主页的FTP站点，也可以新开一个FTP站点；在DHCP配置好之前，本地物理机的VMnet8的IP配置只能手动配置为除了1-4的另一个IP；配置完DHCP后，就可以设置为自动获取IP地址，并且在cmd中用ipconfig命令可以查看到分配的地址池范围内的IP；DNS通过设置正反向解析文件，可以实现对WEB和FTP服务域名的解析，并可以在主机cmd中使用nslookup来实时正反向解析，以测试是否正确。</p>
<p>在服务器管理器下的“角色”中，点击“添加角色”</p>
<img src="/2024/06/15/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/%E8%AE%A1%E7%BD%91%E5%AE%9E%E8%AE%AD%E8%AE%BA%E6%96%87/4529c2013f1593611e09e2f8aa6b7095.png" class="">

<p>图4 服务器管理器-&gt;角色-&gt;添加角色</p>
<p>如图5，可以看到，DHCP DNS和WEB都可以在这里选，后续我们会一个个在这里勾选并安装。这里我们先勾选WEB。在下一步后，如图6，一定要记得勾选FTP，因为FTP会挂在WEB上。</p>
<img src="/2024/06/15/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/%E8%AE%A1%E7%BD%91%E5%AE%9E%E8%AE%AD%E8%AE%BA%E6%96%87/032438f3587b72c66b84c28e0ef5feed.png" class="">

<p>图5 添加服务器角色界面</p>
<img src="/2024/06/15/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/%E8%AE%A1%E7%BD%91%E5%AE%9E%E8%AE%AD%E8%AE%BA%E6%96%87/1ee5621539eb145f0ba299485ae4823d.png" class="">

<p>图6 角色服务中勾选FTP</p>
<p>在“网站”下，可以给自己的web服务主页网站绑定IP地址和端口，如图7，这里是192.168.2.1</p>
<style>.iqmhrtjrimxp{zoom:80%;}</style><img src="/2024/06/15/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/%E8%AE%A1%E7%BD%91%E5%AE%9E%E8%AE%AD%E8%AE%BA%E6%96%87/26ef617909bd50f214617b107da90d04.png" class="iqmhrtjrimxp">

<p>图7 给Web绑定IP</p>
<p>双击“我的电脑”，浏览到Web服务器的主目录，新建一个文本文档，在其中输入一些内容，并将其保存为index.html文件</p>
<p>如图8-10，右键“网站”，可以添加FTP站点，并绑定IP，这里FTP站点IP为192.168.2.2</p>
<img src="/2024/06/15/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/%E8%AE%A1%E7%BD%91%E5%AE%9E%E8%AE%AD%E8%AE%BA%E6%96%87/9b7bfbca8e06fdd3b242a5bc7435d4a7.png" class="">

<p>图8 给FTP站点绑定IP</p>
<img src="/2024/06/15/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/%E8%AE%A1%E7%BD%91%E5%AE%9E%E8%AE%AD%E8%AE%BA%E6%96%87/d868705df4927ce36e2d1f23f28f0962.png" class="">

<p>图9 设置站点名称和FTP文件路径</p>
<style>.xkbcpximzypf{zoom: 67%;}</style><img src="/2024/06/15/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/%E8%AE%A1%E7%BD%91%E5%AE%9E%E8%AE%AD%E8%AE%BA%E6%96%87/b675d63f325abd200148e8f503e0b338.png" class="xkbcpximzypf">

<p>图10 绑定FTP站点IP及相关设置</p>
<p>我们再次去角色管理处添加DHCP服务，在添加作用域这一步，指明作用域的名称以及地址池的范围，这里我们填192.168.2.101——192.168.2.120，如图11</p>
<img src="/2024/06/15/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/%E8%AE%A1%E7%BD%91%E5%AE%9E%E8%AE%AD%E8%AE%BA%E6%96%87/99904f975919833826f653b42fcdc780.png" class="">

<p>图11 添加地址池并制定范围</p>
<p>最后我们配置DNS服务器，我们先在角色管理下载DNS服务，如图12</p>
<img src="/2024/06/15/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/%E8%AE%A1%E7%BD%91%E5%AE%9E%E8%AE%AD%E8%AE%BA%E6%96%87/4c2f3c4c84c673cfbfe4e3cd1271a2a9.png" class="">

<p>图12 下载DNS服务</p>
<p>在DNS管理器中，我们要创建正向区域（如图13）和反向区域（如图14），正向区域要指明区域的域名，这里是sdz.cie.net；反向区域要指明正向域名对应的IP网络，这里是192.168.2.xx</p>
<img src="/2024/06/15/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/%E8%AE%A1%E7%BD%91%E5%AE%9E%E8%AE%AD%E8%AE%BA%E6%96%87/f340f8b8c4a29e86e7bffc0d5c7add91.png" class="">

<p>图13 创建正向区域</p>
<img src="/2024/06/15/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/%E8%AE%A1%E7%BD%91%E5%AE%9E%E8%AE%AD%E8%AE%BA%E6%96%87/f6ded066feb2f1b33a9c31d75220d6f0.png" class="">

<p>图14 创建反向区域</p>
<p>接着，我们要在创建好的正向查找区域中添加域，如图15；填入名称和对应IP，如图16。这里我们需要添加三个域，分别是www ftp和domain，分别对应Web Ftp和Dns的域名解析服务。IP分别对应为192.168.2.1 192.168.2.2 和 192.168.2.4</p>
<p>记得勾选创建相关指针PTR记录，这样就不用添加反向解析文件，可以自动添加，只需要再刷新一下即可，如图17</p>
<img src="/2024/06/15/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/%E8%AE%A1%E7%BD%91%E5%AE%9E%E8%AE%AD%E8%AE%BA%E6%96%87/bb2b193b99df210b8e54fb9de4d201a3.png" class="">

<p>图15 新建域</p>
<img src="/2024/06/15/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/%E8%AE%A1%E7%BD%91%E5%AE%9E%E8%AE%AD%E8%AE%BA%E6%96%87/452f9219c64cfa5c0cc151a46bb4230c.png" class="">

<p>图16 添加对应域名和IP</p>
<p>. <img src="/2024/06/15/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/%E8%AE%A1%E7%BD%91%E5%AE%9E%E8%AE%AD%E8%AE%BA%E6%96%87/31a7674b0cd06f5075982495550ea479.png" class=""></p>
<p>图17 刷新反向解析区域</p>
<p>至此，Windows下的四个服务都已经搭建完成。</p>
<h3 id="Linux-CentOS-7"><a href="#Linux-CentOS-7" class="headerlink" title="Linux CentOS 7"></a>Linux CentOS 7</h3><p>我的Linux配置过程非常顺利，半个上午就全部配好了四个服务。总体上，是先配置好了yum源，使得在没有网络的情况下我也可以下载安装对应的服务，httpd、vsftpd、dhcpd和bind。接着进入各个服务的主配置文件，按照需求进行对应的修改即可搭建成功。原理是和windows一模一样的，只是基于命令和文件编辑来实现罢了。这里我就不再赘述了。具体的配置过程我会在文末放出我配置过程中的参考视频和教程。</p>
<h1 id="调试与测试"><a href="#调试与测试" class="headerlink" title="调试与测试"></a>调试与测试</h1><p>再次抱歉，没有保存实验结果的截图，不过实验结果都是老师验收过并记录过的，已经全部完成实训任务</p>
<h2 id="中小型企业网络搭建-3"><a href="#中小型企业网络搭建-3" class="headerlink" title="中小型企业网络搭建"></a>中小型企业网络搭建</h2><p>在小组成员的通力合作之下，我们最终实现了可以从PC机ping到RB的2号端口</p>
<p>四台PC之间也都可以相互ping通</p>
<p>实现了任务要求</p>
<h2 id="服务器搭建-3"><a href="#服务器搭建-3" class="headerlink" title="服务器搭建"></a>服务器搭建</h2><p>在6月14日下午验收时，霍迎秋老师已经对我的成果进行了验收，通过ipconfig检查两块网卡的DHCP分配情况，通过域名访问服务检查DNS和WEB、FTP服务。 我成功实现了在Windows Server 2008和Linux CentOS 7下分别搭建四个服务，并正确回答了霍老师提出的问题</p>
<p><strong>老师问——“为什么这个nslookup解析的时候，无法解析<a href="http://www.sdz.cie.net这个域名？”">www.sdz.cie.net这个域名？”</a></strong></p>
<p><strong>答</strong>：因为这里采用的DNS服务器为192.168.2.254，是Linux平台下搭建的DNS服务器，里面仅仅录入了www2、ftp2、domain2域名，而没有录入windows下的www、ftp、domain域名，因此它无法解析，如果使用192.168.2.4来解析域名，就可以解析<a target="_blank" rel="noopener" href="http://www.sdz.cie.net了/">www.sdz.cie.net了</a></p>
<h1 id="实习日志"><a href="#实习日志" class="headerlink" title="实习日志"></a>实习日志</h1><h2 id="6月11日"><a href="#6月11日" class="headerlink" title="6月11日"></a>6月11日</h2><p>小组内部开始讨论并设计整体的实现方案，画出规划图，并根据老师的分配，设计各个地方的IP地址。由我和肖博进行具体的分工，我负责SA的配置。于是我开始按照第四部分详细设计中所说的步骤，一步一步配置SA，包括删除默认VLAN1中的IP地址、创建VLAN71和VLAN72、设置端口3和端口4为trunk模式、给VLAN71和VLAN72分配虚拟接口地址、将端口1从二层接口改为三层接口，并分配IP、给SA配置MSTP协议、配置VRRP协议、配置SA与SB的连接、给SA配置RIP协议。</p>
<p>在第一天结束时，我们已经可以四台PC互相Ping通了。</p>
<h2 id="6月12日"><a href="#6月12日" class="headerlink" title="6月12日"></a>6月12日</h2><p>顺带一提，这天是我的生日，祝我自己生日快乐！</p>
<p>我们本来想在昨天的基础上，等其他组员配完RA和RB就结束任务，结果配完RA和RB并连线后，昨天的功能也无法实现了。我们以为是MSTP的问题，必须把所有设备配置好后再连接（但其实不是，因为RA RB不牵扯到MSTP工作），于是我们重新推倒重来，把所有设备重新配了一遍，然后连接，结果发现依旧不行，同一个VLAN间互相可以通信，但不同VLAN间无法通信。</p>
<p>这时我们开始着急了，因为下午就验收了，到这个时间基本功能还实现不了，最关键的是没有debug的手段，我们也不知道哪里错了，非常迷茫，重新配了一遍也不行。</p>
<p>正当我们焦头烂额时，我突然灵光一现，我在想会不会是关机又开机后，PC的网关重置了，没有保存原有的地址，我打开一看，果然，是一个不知道的IP，我马上改为我VRRP协议中设置的对应VLAN的门票地址，并跟同组的肖博同学说了这个情况，可他非常自信的和我说，他早上重新设置过了，这我就纳闷了，过去一看，他确实重新设置了，但是重新设置错了，设置成了.255，要知道255是广播地址啊，我们VRRP是.252，因此我马上给他改过来，然后我们再次测试，就可以Ping通了。</p>
<p>接着我们其他组员配置好了RA和RB，连接后成功实现了所有功能。</p>
<h2 id="6月13日"><a href="#6月13日" class="headerlink" title="6月13日"></a>6月13日</h2><p>今天开始要进行搭建服务器这个新的任务了，一开始，我特别迷茫，因为我除了两台虚拟机以外什么也没有，我也不知道要从哪里开始，也没有人教。于是我开始上网查找资料，搜索：如何在Windows Server 2008下搭建Web服务器，发现有很多教程，于是我跟着视频开始配置。</p>
<p>期间我遇到了许多问题，比如“全都配置好了，但就是ping不通”——破案了，没关防火墙；比如“DHCP配好后虚拟机重启了一下突然又不行了，分配不到IP”，挣扎半天，就算尝试了卸载重装也不行，因为它有记忆功能，还会保留你卸载前的设置，最后发现是他服务自己断掉了，只需要你ipconfig/release后，再ipconfig/renew一下，就可以了，耽误我下午一个多小时，非常生气；还比如有“怎么没找到设置DHCP服务器IP地址的地方？”，最后发现要求的.3其实用不上，DHCP没有绑定IP的必要性，其实不影响你功能的实现。</p>
<p>最让我印象深刻的是，配置好DNS后，我发现在虚拟机内部都是可以正常解析的，但是不知道为什么，在主机上就不行，就会跳转到一个“此网站正在出售”字样的网站，大家都遇到了这个情况，已经被大家玩成梗了hhh。最后发现问题在于主机的“本地连接”网卡，它的DNS服务器是另一个服务器，因此有时你在本地主机测试时，它会使用这个DNS而不是VMnet8或VMnet1的DNS，因此需要你把本地连接的DNS也改成你自己的DNS服务器，或者禁用本地连接。不过霍老师说了，不让禁用，并且有的同学一禁用就死机重启（不过我的电脑不会死机），所以我们还是老老实实把本地连接的DNS改一下即可。</p>
<h2 id="6月14日"><a href="#6月14日" class="headerlink" title="6月14日"></a>6<strong>月</strong>14日</h2><p>这一天说实话压力还是很大的，因为只配好了Windows，Linux只有差不多一个上午的时间来配，下午就验收了，所以一开始我是很紧张的，并且听其他已经做过的同学说，因为Linux只有一个黑窗口，只能通过命令来操作，所以会很麻烦。</p>
<p>但其实，在配置的过程中，我发现Linux是非常甚至是异常顺利的，基本没遇到坑，只要踏踏实实按照教程和步骤来，平均十分钟一个服务，一两个小时我就速通了。Linux虽然只能通过命令行一直敲命令，但是它的好处是，只要你确定你按着步骤没有敲错，那么你一定可以和其他人一样成功实现服务。Linux给我一种踏实感，也可能是因为我做科创项目经常接触Linux平台的服务器，导致我对Linux异常亲切，所以敲命令也特别舒服。</p>
<p>主要的流程是：（1）配置Yum源（2）配置本机IP、子网掩码、网关等（3）安装并启动httpd（web）服务（4）安装并启动vsftpd（ftp）服务，需要配置匿名和登录用户的权限等（5）安装并启动DHCP服务，配置完后主机就可以设置为自动获取IP了（6）安装Bind服务，并新建正反向区域解析文件，并在文件中添加要解析的域名和对应IP等。</p>
<p>在我配置完后，我还帮助多个同班同学寻找问题，解决问题，帮助他们也都配置好了服务，也因此还收获了齐飞翔同学送给我的一杯杨枝甘露，很有成就感！</p>
<p>最终下午验收，非常顺利地通过所有测试，并回答出老师的问题，拿到100分。还是很开心的。</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>我个人非常喜欢此次计算机网络综合实训，原因有以下几点：</p>
<p>（1）节奏紧凑，任务分配与时间平衡的很好，不会让人偷懒或者摆烂</p>
<p>（2）与课程衔接很棒，老师会讲授快要忘掉和以前没有学过的协议，以及会有老师的帮助文档可以参考，所以既有挑战，但又不是不可逾越的鸿沟。</p>
<p>（3）分配合理，既有个人任务又有小组任务，培养独立解决问题能力，也培养了协作能力。</p>
<p>（4）不是走形式，能学到东西，有正反馈。看看隔壁的计算机系统实训，老师两周一个字没讲，两周硬是没学到什么东西，毫无正反馈。让我们自己去网上找代码读代码，我不好评价。</p>
<p>接着，首先我要感谢第一个任务小组中丝毫不划水的同学，是我并肩作战的好兄弟，SA SB S1 S2 RA RB其实基本上都是我俩自己敲的，托他的福搭建网络任务顺利完成了；接着我要感谢给予我帮助的老师和同学，比如第一个实验中我被桌子上写的号码蒙蔽而分不清电脑是PC几，是孟老师给予了我帮助，第二个实验中，windows的DNS服务不能反向解析，是霍迎秋老师帮我debug，发现我在绑定WEB和FTP时，多加了主机名；还有1班2班已经做过实习的同学们，给我的参考资料和解决问题，都很及时，很有用，非常感谢大家！</p>
<p>在这段实训期间，我不仅体验了中小型企业网络组建的全过程，还收获了服务器搭建的初体验。从最初对Windows Server版OS的陌生感到逐步掌握服务器配置，我收获颇丰。</p>
<p>在搭建企业网络时，最开始我们都很茫然，不知道该干什么，具体任务也都不清楚，因此花了比较多的时间去理解题目，画拓扑图，完成方案设计，并分配任务，我负责了交换机SA的配置，这包括了VLAN的划分、生成树协议的配置、链路聚合、三层接口的转换以及 VRRP 协议的启用。通过这些配置，确保了网络的稳定性和可靠性。</p>
<p>在搭建服务器这个过程中，非常感谢隔壁班同学身先士卒，解决了很多痛点问题，尤其是CentOS系统仅主机模式，无法上网的问题。前人都帮我把坑踩完了，所以我在配置CentOS的时候异常顺利。</p>
<p>最后，再次感谢各位老师和同学的帮助！</p>
<h1 id="附录：核心代码清单"><a href="#附录：核心代码清单" class="headerlink" title="附录：核心代码清单"></a>附录：核心代码清单</h1><h2 id="S1-S2"><a href="#S1-S2" class="headerlink" title="S1/S2"></a>S1/S2</h2><p>enable 14</p>
<p>ruijie@123</p>
<p>#configure terminal</p>
<p>(config)#hostname S1/S2</p>
<p>(config)# interface vlan 1</p>
<p>(config-if-VLAN 1)#no ip address</p>
<p>(config-if-VLAN 1)#exit</p>
<p>(config)# no interface vlan 1</p>
<p>(config)#vlan 71</p>
<p>(config-vlan)# exit</p>
<p>(config)# vlan 72</p>
<p>(config-vlan)#exit</p>
<p>(config)# interface g 0/1</p>
<p>(config-if-GigabitEthernet 0/1)# switch access vlan 71</p>
<p>(config-if-GigabitEthernet 0/1)#exit</p>
<p>(config)# interface g 0/4</p>
<p>(config-if-GigabitEthernet 0/4)# switch access vlan 72</p>
<p>(config-if-GigabitEthernet 0/4)#exit</p>
<p>(config)#interface g 0/3</p>
<p>(config-if-GigabitEthernet 0/3)# switchport mode trunk</p>
<p>(config-if-GigabitEthernet 0/3)#exit</p>
<p>(config)# interface g 0/2</p>
<p>(config-if-GigabitEthernet 0/2)# switchport mode trunk</p>
<p>(config-if-GigabitEthernet 0/2)#exit</p>
<p>(config)# vlan range 71,72</p>
<p>(config-vlan-range) #exit</p>
<p>(config)# spanning-tree mst configuration</p>
<p>(config-mst)# instance 1 vlan 71</p>
<p>instance 2 vlan 72</p>
<p>exit</p>
<p>(config)# spanning-tree</p>
<h2 id="SA"><a href="#SA" class="headerlink" title="SA"></a>SA</h2><p>Ruijie(config)#hostname SA</p>
<p>SA(config)#vlan 71</p>
<p>SA(config-vlan)#exit</p>
<p>SA(config)#vlan 72</p>
<p>SA(config-vlan)#exit</p>
<p>SA(config)#int vlan 1</p>
<p>SA(config-if-VLAN 1)#no ip add</p>
<p>SA(config-if-VLAN 1)#exit</p>
<p>SA(config)#interface g0/2</p>
<p>SA(config-if-GigabitEthernet 0/2)#switchport mode trunk</p>
<p>SA(config-if-GigabitEthernet 0/2)#interface g0/3</p>
<p>SA(config-if-GigabitEthernet 0/3)#switchport mode trunk</p>
<p>SA(config)#ip routing</p>
<p>SA(config)#interface vlan 71</p>
<p>SA(config-if-VLAN 71)#no shut</p>
<p>SA(config-if-VLAN 71)#ip add 192.168.71.253 255.255.255.0</p>
<p>SA(config-if-VLAN 71)#interface vlan 72</p>
<p>SA(config-if-VLAN 72)#no shut</p>
<p>SA(config-if-VLAN 72)#ip add 192.168.72.253 255.255.255.0</p>
<p>SA(config)#interface g0/1</p>
<p>SA(config-if-GigabitEthernet 0/1)#no switchport</p>
<p>SA(config-if-GigabitEthernet 0/1)#ip address 10.36.10.1 255.255.255.0</p>
<p>SA(config)#spanning-tree mst config</p>
<p>SA(config-mst)#instance 1 vlan 71</p>
<p>SA(config-mst)#instance 2 vlan 72</p>
<p>SA(config-mst)#exit</p>
<p>SA(config)#spanning-tree mst 1 priority 4096</p>
<p>SA(config)#spanning-tree mst 2 priority 8192</p>
<p>SA(config)#spanning-tree</p>
<p>SA(config)#interface vlan 71</p>
<p>SA(config-if-VLAN 71)#vrrp 71 ip 192.168.71.252</p>
<p>SA(config-if-VLAN 71)#vrrp 71 priority 120</p>
<p>SA(config-if-VLAN 71)#exit</p>
<p>SA(config)#interface vlan 72</p>
<p>SA(config-if-VLAN 72)#vrrp 72 ip 192.168.72.252</p>
<p>SA(config-if-VLAN 72)#vrrp 72 priority 100</p>
<p>SA(config-if-VLAN 72)#exit</p>
<p>SA(config)#int aggregateport 1</p>
<p>SA(config-if-AggregatePort 1)#switchport mode trunk</p>
<p>SA(config-if-AggregatePort 1)#exit</p>
<p>SA(config)#int g0/5</p>
<p>SA(config-if-GigabitEthernet 0/5)#port-group 1</p>
<p>SA(config)#int g0/6</p>
<p>SA(config-if-GigabitEthernet 0/6)#port-group 1</p>
<p>SA(config-if-GigabitEthernet 0/6)#exit</p>
<p>SA(config)#router rip</p>
<p>SA(config-router)#version 2</p>
<p>SA(config-router)#no auto-summary</p>
<p>SA(config-router)#network 0.0.0.0 255.255.255.255</p>
<p>SA(config-router)#exit</p>
<h2 id="SB"><a href="#SB" class="headerlink" title="SB"></a>SB</h2><p>Ruijie(config)#hostname SB</p>
<p>……………………..同SA</p>
<p>SB(config-if-GigabitEthernet 0/4)#ip routing</p>
<p>SB(config)#interface vlan 71</p>
<p>SB(config-if-VLAN 71)#no shut</p>
<p>SB(config-if-VLAN 71)#ip add 192.168.71.254 255.255.255.0</p>
<p>SB(config-if-VLAN 71)#interface vlan 72</p>
<p>SB(config-if-VLAN 72)#no shut</p>
<p>SB(config-if-VLAN 72)#ip add 192.168.72.254 255.255.255.0</p>
<p>SB(config-if-VLAN 72)#interface g0/1 //将二层接口改为三层接口 设置端口IP地址</p>
<p>SB(config-if-GigabitEthernet 0/1)#no switchport</p>
<p>SB(config-if-GigabitEthernet 0/1)#ip address 10.36.20.1 255.255.255.0</p>
<p>SB(config)#spanning-tree mst config //配置生成树协议</p>
<p>SB(config-mst)#instance 1 vlan 71</p>
<p>SB(config-mst)#instance 2 vlan 72</p>
<p>SB(config-mst)#exit</p>
<p>SB(config)#spanning-tree mst 1 priority 8192</p>
<p>SB(config)#spanning-tree mst 2 priority 4096</p>
<p>SB(config)#spanning-tree</p>
<p>SB(config)#interface vlan 71</p>
<p>SB(config-if-VLAN 71)#vrrp 71 ip 192.168.72.252 //设置vrrp协议</p>
<p>SB(config-if-VLAN 71)#vrrp 71 priority 100</p>
<p>SB(config-if-VLAN 71)#exit</p>
<p>SB(config)#interface vlan 72</p>
<p>SB(config-if-VLAN 72)#vrrp 20 ip 192.168.72.252</p>
<p>SB(config-if-VLAN 72)#vrrp 20 priority 120</p>
<p>SB(config-if-VLAN 72)#exit</p>
<p>………………………. 同SA</p>
<h2 id="RA"><a href="#RA" class="headerlink" title="RA"></a>RA</h2><p>enable 14</p>
<p>ruijie@123</p>
<p>#configure terminal</p>
<p>(config)#hostname RA</p>
<p>(config)#interface g 0/1</p>
<p>(config-if-GigabitEthernet 0/1)# ip address 10.36.10.2 255.255.255.0</p>
<p>(config-if-GigabitEthernet 0/1)#exit</p>
<p>(config)# interface g 0/2</p>
<p>(config-if-GigabitEthernet 0/2)# ip address 10.36.20.2 255.255.255.0</p>
<p>(config-if-GigabitEthernet 0/2)#exit</p>
<p>(config)# interface g 0/3</p>
<p>(config-if-GigabitEthernet 0/3)# ip address 10.36.30.2 255.255.255.0</p>
<p>(config-if-GigabitEthernet 0/3)#exit</p>
<p>(config)# router rip</p>
<p>(config-router)#version 2</p>
<p>no auto-summary</p>
<p>network 0.0.0.0 255.255.255.255</p>
<p>exit</p>
<h2 id="RB"><a href="#RB" class="headerlink" title="RB"></a>RB</h2><p>Ruijie(config)#int g0/2</p>
<p>Ruijie(config-if-GigabitEthernet 0/2)#ip address 172.29.20.54 255.255.255.0</p>
<p>Ruijie(config-if-GigabitEthernet 0/2)#int g0/3</p>
<p>Ruijie(config-if-GigabitEthernet 0/2)#ip address 10.36.30.1 255.255.255.0</p>
<p>Ruijie(config)#int g0/3</p>
<p>Ruijie(config)#ip nat inside</p>
<p>Ruijie(config)#int g0/2</p>
<p>Ruijie(config)#ip nat outside</p>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_45089570/article/details/122398405">windows server 2008安装配置web服务器</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_45089570/article/details/122398378">windows server 2008安装配置FTP服务器</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_45089570/article/details/122398343">windows server 2008安装配置DHCP服务器</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_37029060/article/details/87103330">Windows Server 2008 R2 搭建DNS服务器</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Lh411p7en/?p=3&amp;vd_source=1eb9aca944abe38e6672bbee43743ae5">CentOS配置网络_bilibili</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1CV411B7dC/?vd_source=1eb9aca944abe38e6672bbee43743ae5">CentOS 7 部署Apache服务_bilibili</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV15v411q7Bq/?vd_source=1eb9aca944abe38e6672bbee43743ae5">CentOS 7 部署vstfpd服务_bilibili</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Kk4y1m7Ko/?vd_source=1eb9aca944abe38e6672bbee43743ae5">CentOS 7 部署DHCP服务_bilibili</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1cZ4y1g779/?vd_source=1eb9aca944abe38e6672bbee43743ae5">CentOS 7 部署BIND服务（DNS服务）_bilibili</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">Endorphin</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2024/06/15/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/%E8%AE%A1%E7%BD%91%E5%AE%9E%E8%AE%AD%E8%AE%BA%E6%96%87/">http://example.com/2024/06/15/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/%E8%AE%A1%E7%BD%91%E5%AE%9E%E8%AE%AD%E8%AE%BA%E6%96%87/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Endorphin's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a><a class="post-meta__tags" href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA/">服务器搭建</a></div><div class="post_share"><div class="social-share" data-image="https://tse4-mm.cn.bing.net/th/id/OIP-C.WRUHUqRfulfxFQ8Z3GihKQAAAA?w=202&amp;h=202&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.3&amp;pid=1.7" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer=""></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2024/06/03/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/YOLOv9%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/" title="YOLOv9"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">YOLOv9</div></div></a></div></nav><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://tse4-mm.cn.bing.net/th/id/OIP-C.WRUHUqRfulfxFQ8Z3GihKQAAAA?w=202&amp;h=202&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.3&amp;pid=1.7" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"></div><div class="author-info__name">Endorphin</div><div class="author-info__description">An IT Student</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/EndorphinFluoxetine"><i class="fab fa-github"></i><span>Github</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/EndorphinFluoxetine" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:dongzhencs@nwafu.edu.cn" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">If you have any suggestion, welcome to contact me!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">任务介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%AD%E5%B0%8F%E5%9E%8B%E4%BC%81%E4%B8%9A%E7%BD%91%E7%BB%9C%E6%90%AD%E5%BB%BA"><span class="toc-number">1.1.</span> <span class="toc-text">中小型企业网络搭建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA"><span class="toc-number">1.2.</span> <span class="toc-text">服务器搭建</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%80%BB%E4%BD%93%E8%AE%BE%E8%AE%A1"><span class="toc-number">2.</span> <span class="toc-text">总体设计</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%AD%E5%B0%8F%E5%9E%8B%E4%BC%81%E4%B8%9A%E7%BD%91%E7%BB%9C%E6%90%AD%E5%BB%BA-1"><span class="toc-number">2.1.</span> <span class="toc-text">中小型企业网络搭建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA-1"><span class="toc-number">2.2.</span> <span class="toc-text">服务器搭建</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AF%A6%E7%BB%86%E8%AE%BE%E8%AE%A1%E8%AF%B4%E6%98%8E"><span class="toc-number">3.</span> <span class="toc-text">详细设计说明</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%AD%E5%B0%8F%E5%9E%8B%E4%BC%81%E4%B8%9A%E7%BD%91%E7%BB%9C%E6%90%AD%E5%BB%BA-2"><span class="toc-number">3.1.</span> <span class="toc-text">中小型企业网络搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#S1-S2%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E"><span class="toc-number">3.1.1.</span> <span class="toc-text">S1 S2配置说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SA%E3%80%81SB%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E"><span class="toc-number">3.1.2.</span> <span class="toc-text">SA、SB配置说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RA%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-number">3.1.3.</span> <span class="toc-text">RA的配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RB%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-number">3.1.4.</span> <span class="toc-text">RB的配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PC%E9%85%8D%E7%BD%AE"><span class="toc-number">3.1.5.</span> <span class="toc-text">PC配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E7%BA%BF"><span class="toc-number">3.1.6.</span> <span class="toc-text">连线</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA-2"><span class="toc-number">3.2.</span> <span class="toc-text">服务器搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Windows-Server-2008"><span class="toc-number">3.2.1.</span> <span class="toc-text">Windows Server 2008</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux-CentOS-7"><span class="toc-number">3.2.2.</span> <span class="toc-text">Linux CentOS 7</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B0%83%E8%AF%95%E4%B8%8E%E6%B5%8B%E8%AF%95"><span class="toc-number">4.</span> <span class="toc-text">调试与测试</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%AD%E5%B0%8F%E5%9E%8B%E4%BC%81%E4%B8%9A%E7%BD%91%E7%BB%9C%E6%90%AD%E5%BB%BA-3"><span class="toc-number">4.1.</span> <span class="toc-text">中小型企业网络搭建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA-3"><span class="toc-number">4.2.</span> <span class="toc-text">服务器搭建</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E4%B9%A0%E6%97%A5%E5%BF%97"><span class="toc-number">5.</span> <span class="toc-text">实习日志</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E6%9C%8811%E6%97%A5"><span class="toc-number">5.1.</span> <span class="toc-text">6月11日</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E6%9C%8812%E6%97%A5"><span class="toc-number">5.2.</span> <span class="toc-text">6月12日</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E6%9C%8813%E6%97%A5"><span class="toc-number">5.3.</span> <span class="toc-text">6月13日</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E6%9C%8814%E6%97%A5"><span class="toc-number">5.4.</span> <span class="toc-text">6月14日</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">6.</span> <span class="toc-text">总结</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%99%84%E5%BD%95%EF%BC%9A%E6%A0%B8%E5%BF%83%E4%BB%A3%E7%A0%81%E6%B8%85%E5%8D%95"><span class="toc-number">7.</span> <span class="toc-text">附录：核心代码清单</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#S1-S2"><span class="toc-number">7.1.</span> <span class="toc-text">S1/S2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SA"><span class="toc-number">7.2.</span> <span class="toc-text">SA</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SB"><span class="toc-number">7.3.</span> <span class="toc-text">SB</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RA"><span class="toc-number">7.4.</span> <span class="toc-text">RA</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RB"><span class="toc-number">7.5.</span> <span class="toc-text">RB</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">8.</span> <span class="toc-text">参考资料</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/06/15/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/%E8%AE%A1%E7%BD%91%E5%AE%9E%E8%AE%AD%E8%AE%BA%E6%96%87/" title="计算机网络综合训练报告">计算机网络综合训练报告</a><time datetime="2024-06-14T16:00:00.000Z" title="发表于 2024-06-15 00:00:00">2024-06-15</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/06/03/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/YOLOv9%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/" title="YOLOv9">YOLOv9</a><time datetime="2024-06-02T16:00:00.000Z" title="发表于 2024-06-03 00:00:00">2024-06-03</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/05/28/My-first-blog/" title="My first blog">My first blog</a><time datetime="2024-05-28T08:38:37.271Z" title="发表于 2024-05-28 16:38:37">2024-05-28</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/05/28/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" title="计算机网络">计算机网络</a><time datetime="2024-05-27T16:00:00.000Z" title="发表于 2024-05-28 00:00:00">2024-05-28</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/05/27/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/Vocabulary/" title="Vocabulary">Vocabulary</a><time datetime="2024-05-26T16:00:00.000Z" title="发表于 2024-05-27 00:00:00">2024-05-27</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">©2020 - 2024 By Endorphin</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script><script>(() => {
  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo-endorphins-projects.vercel.app/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo-endorphins-projects.vercel.app/',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))

    
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(init,0)
    else getScript('https://cdn.jsdelivr.net/npm/twikoo@1.6.31/dist/twikoo.all.min.js').then(init)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script async="" data-pjax="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>